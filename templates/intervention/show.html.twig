{% extends "base.html.twig" %}
{% block title %} {{title}} {% endblock %}
{% block body %}

<div class="content">
    <div class="card  my-4">
        <div class="card-header">
            <span class="card-title h5">Voir la intervention</span>
        </div>
        <div class="card-body">

            <div class="row d-flex align-items-stretch">
                <div class="col-4 card shadow m-2">
                    
                    <div class="card-body text-center">
                        <img src="{{ '/uploads/pictures/' ~ intervention.equipement.colection.picture }}" alt="picture" class="rounded img-fluid" style="width: 150px;">
                        <h5 class="my-3">{{ intervention.equipement.name }}, {{ intervention.equipement.site.name }}</h5>
                        <p class="text-muted mb-1">{{ intervention.equipement.service }}</p>
                        <p class="text-muted mb-4">Mise en service le {{ intervention.equipement.usedAt | date("d/m/Y") }}</p>
                        
                    </div>
                   
                </div>
                <div class="col card shadow m-2">
                    
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">CreatedAt</p>
                            </div>
                            <div class="col-sm-9">
                                <p class="text-muted mb-0">{{ intervention.createdAt | date("d/m/Y H:i:s") }}</p>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">Equipement</p>
                            </div>
                            <div class="col-sm-9">
                                <p class="text-muted mb-0">{{ intervention.equipement.name }}</p>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">Site</p>
                            </div>
                            <div class="col-sm-9">
                                <p class="text-muted mb-0">{{ intervention.equipement.site.name }}</p>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">Service</p>
                            </div>
                            <div class="col-sm-9">
                                <p class="text-muted mb-0">{{ intervention.equipement.service }}</p>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">PlannedAt</p>
                            </div>
                            <div class="col-sm-9">
                                <p class="text-muted mb-0">{{ intervention.plannedAt | date("d/m/Y H:i:s") }}</p>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">StartedAt</p>
                            </div>
                            <div class="col-sm-9">
                                <p class="text-muted mb-0">{{ intervention.startedAt | date("d/m/Y H:i:s") }}</p>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">FinishedAt</p>
                            </div>
                            <div class="col-sm-9">
                                <p class="text-muted mb-0">{{ intervention.finishedAt | date("d/m/Y H:i:s") }}</p>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">Comment</p>
                            </div>
                            <div class="col-sm-9">
                                <p class="text-muted mb-0">{{ intervention.comment }}</p>
                            </div>
                        </div>
                        <hr>

                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">State</p>
                            </div>
                            <div class="col-sm-9">
                                <p class="text-muted mb-0">{{ intervention.state }}</p>
                            </div>
                        </div>
                        <hr>

                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">Techs</p>
                            </div>
                            <div class="col-sm-9">
                                {% for tech in intervention.techniciens %}
                                    <p class="text-muted mb-0">{{ tech.lastname ~ ', ' ~ tech.firstname ~ ' / ' ~ tech.job }}</p>
                                {% endfor %}
                                
                            </div>
                        </div>
                        <hr>

                        <div class="d-flex justify-content-start">
                            {% if is_granted('ROLE_ADMINISTRATEUR') or (is_granted('ROLE_TECHNICIEN')) %}
                                <a href="{{ path('interventions_edit', {'id': intervention.id}) }}" type="button" class="btn btn-success me-2">Modifier</a>
                            {% endif %}
                            <a class="btn btn-primary me-2" href="">Imprimer</a>
                            <a class="btn btn-secondary" href="{{ path('interventions') }}">Liste</a>
                        </div>
                        
                    </div>

                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}